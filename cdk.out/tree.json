{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.232.1"},"children":{"agentcore-policy-dev":{"id":"agentcore-policy-dev","path":"agentcore-policy-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.232.1"},"children":{"Gateway":{"id":"Gateway","path":"agentcore-policy-dev/Gateway","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-agentcore-alpha.Gateway","version":"2.232.1-alpha.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"agentcore-policy-dev/Gateway/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"agentcore-policy-dev/Gateway/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"agentcore-policy-dev/Gateway/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"bedrock-agentcore.amazonaws.com"}},{"Action":"sts:AssumeRole","Condition":{"StringEquals":{"aws:SourceAccount":"249522321342"},"ArnLike":{"aws:SourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":bedrock-agentcore:us-east-1:249522321342:gateway/test-gateway*"]]}}},"Effect":"Allow","Principal":{"Service":"bedrock-agentcore.amazonaws.com"}}],"Version":"2012-10-17"},"description":"Service role for Bedrock AgentCore Gateway test-gateway"}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"agentcore-policy-dev/Gateway/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"agentcore-policy-dev/Gateway/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::cdk-hnb659fds-assets-249522321342-us-east-1"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::cdk-hnb659fds-assets-249522321342-us-east-1/*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["LambdaD247545B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["LambdaD247545B","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"GatewayServiceRoleDefaultPolicy5A851A93","roles":[{"Ref":"GatewayServiceRole162DEA77"}]}}}}}}},"UserPool":{"id":"UserPool","path":"agentcore-policy-dev/Gateway/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"agentcore-policy-dev/Gateway/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_phone_number","priority":1},{"name":"verified_email","priority":2}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":true},"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","smsVerificationMessage":"The verification code to your new account is {####}","usernameConfiguration":{"caseSensitive":false},"userPoolName":"test-gateway-gw-userpool","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"DefaultClient":{"id":"DefaultClient","path":"agentcore-policy-dev/Gateway/UserPool/DefaultClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"agentcore-policy-dev/Gateway/UserPool/DefaultClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"clientName":"test-gateway-gw-client","supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"GatewayUserPoolAC9C51BE"}}}}}}}},"Resource":{"id":"Resource","path":"agentcore-policy-dev/Gateway/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrockagentcore.CfnGateway","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::BedrockAgentCore::Gateway","aws:cdk:cloudformation:props":{"authorizerConfiguration":{"customJwtAuthorizer":{"discoveryUrl":{"Fn::Join":["",["https://cognito-idp.us-east-1.amazonaws.com/",{"Ref":"GatewayUserPoolAC9C51BE"},"/.well-known/openid-configuration"]]},"allowedClients":[{"Ref":"GatewayUserPoolDefaultClient48FC6ADE"}]}},"authorizerType":"CUSTOM_JWT","description":"Test gateway","name":"test-gateway","protocolConfiguration":{"mcp":{"instructions":"Default gateway to connect to external MCP tools","searchType":"SEMANTIC","supportedVersions":["2025-03-26"]}},"protocolType":"MCP","roleArn":{"Fn::GetAtt":["GatewayServiceRole162DEA77","Arn"]}}}},"lambda":{"id":"lambda","path":"agentcore-policy-dev/Gateway/lambda","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-agentcore-alpha.GatewayTarget","version":"2.232.1-alpha.0","metadata":[]},"children":{"Schema":{"id":"Schema","path":"agentcore-policy-dev/Gateway/lambda/Schema","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"agentcore-policy-dev/Gateway/lambda/Schema/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"agentcore-policy-dev/Gateway/lambda/Schema/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"agentcore-policy-dev/Gateway/lambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrockagentcore.CfnGatewayTarget","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::BedrockAgentCore::GatewayTarget","aws:cdk:cloudformation:props":{"credentialProviderConfigurations":[{"credentialProviderType":"GATEWAY_IAM_ROLE"}],"gatewayIdentifier":{"Fn::GetAtt":["Gateway43CB3636","GatewayIdentifier"]},"name":"weather-lambda","targetConfiguration":{"mcp":{"lambda":{"lambdaArn":{"Fn::GetAtt":["LambdaD247545B","Arn"]},"toolSchema":{"s3":{"uri":"s3://cdk-hnb659fds-assets-249522321342-us-east-1/a33304a1ac6d7ac05fa1a711dfb70bb924c5d813018d7c99c79df09c1720d207.json"}}}}}}}}}}}},"Lambda":{"id":"Lambda","path":"agentcore-policy-dev/Lambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.232.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"agentcore-policy-dev/Lambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"agentcore-policy-dev/Lambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"agentcore-policy-dev/Lambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"Code":{"id":"Code","path":"agentcore-policy-dev/Lambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"agentcore-policy-dev/Lambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"agentcore-policy-dev/Lambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"agentcore-policy-dev/Lambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-249522321342-us-east-1","s3Key":"e7784ccfd3c50041790911745e01070db2fa961e332ce2c0bad82ccd3b3d1856.zip"},"handler":"index.handler","role":{"Fn::GetAtt":["LambdaServiceRoleA8ED4D3B","Arn"]},"runtime":"nodejs20.x"}}}}},"PolicyEngine":{"id":"PolicyEngine","path":"agentcore-policy-dev/PolicyEngine","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"agentcore-policy-dev/PolicyEngine/Resource","constructInfo":{"fqn":"aws-cdk-lib.custom_resources.AwsCustomResource","version":"2.232.1"},"children":{"Provider":{"id":"Provider","path":"agentcore-policy-dev/PolicyEngine/Resource/Provider","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"agentcore-policy-dev/PolicyEngine/Resource/Resource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.232.1","metadata":[]},"children":{"Default":{"id":"Default","path":"agentcore-policy-dev/PolicyEngine/Resource/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"CustomResourcePolicy":{"id":"CustomResourcePolicy","path":"agentcore-policy-dev/PolicyEngine/Resource/CustomResourcePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"agentcore-policy-dev/PolicyEngine/Resource/CustomResourcePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["bedrock-agentcore:*","iam:PassRole"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"PolicyEngineCustomResourcePolicy2900A11A","roles":[{"Ref":"AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"}]}}}}}}},"Policy-test_policy":{"id":"Policy-test_policy","path":"agentcore-policy-dev/PolicyEngine/Policy-test_policy","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"agentcore-policy-dev/PolicyEngine/Policy-test_policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.custom_resources.AwsCustomResource","version":"2.232.1"},"children":{"Provider":{"id":"Provider","path":"agentcore-policy-dev/PolicyEngine/Policy-test_policy/Resource/Provider","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"agentcore-policy-dev/PolicyEngine/Policy-test_policy/Resource/Resource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.232.1","metadata":[]},"children":{"Default":{"id":"Default","path":"agentcore-policy-dev/PolicyEngine/Policy-test_policy/Resource/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"CustomResourcePolicy":{"id":"CustomResourcePolicy","path":"agentcore-policy-dev/PolicyEngine/Policy-test_policy/Resource/CustomResourcePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"agentcore-policy-dev/PolicyEngine/Policy-test_policy/Resource/CustomResourcePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["bedrock-agentcore:*","iam:PassRole"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"PolicyEnginePolicytestpolicyCustomResourcePolicy85A4FA50","roles":[{"Ref":"AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"}]}}}}}}}}}}},"AWS679f53fac002430cb0da5b7982bd2287":{"id":"AWS679f53fac002430cb0da5b7982bd2287","path":"agentcore-policy-dev/AWS679f53fac002430cb0da5b7982bd2287","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.232.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"agentcore-policy-dev/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"agentcore-policy-dev/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"agentcore-policy-dev/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"Code":{"id":"Code","path":"agentcore-policy-dev/AWS679f53fac002430cb0da5b7982bd2287/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"agentcore-policy-dev/AWS679f53fac002430cb0da5b7982bd2287/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"agentcore-policy-dev/AWS679f53fac002430cb0da5b7982bd2287/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"agentcore-policy-dev/AWS679f53fac002430cb0da5b7982bd2287/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-249522321342-us-east-1","s3Key":"bc8ef58951f4c88e641dd23090e9d2e2e61c7530a07960e767522941e959b625.zip"},"handler":"index.handler","role":{"Fn::GetAtt":["AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2","Arn"]},"runtime":"nodejs22.x","timeout":120}}}}},"GatewayArn":{"id":"GatewayArn","path":"agentcore-policy-dev/GatewayArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"GatewayUrl":{"id":"GatewayUrl","path":"agentcore-policy-dev/GatewayUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"EngineArn":{"id":"EngineArn","path":"agentcore-policy-dev/EngineArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"EngineId":{"id":"EngineId","path":"agentcore-policy-dev/EngineId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"CDKMetadata":{"id":"CDKMetadata","path":"agentcore-policy-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"},"children":{"Default":{"id":"Default","path":"agentcore-policy-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"agentcore-policy-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.232.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"agentcore-policy-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.232.1"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"}}}}}